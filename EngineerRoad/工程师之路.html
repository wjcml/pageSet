<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="author" content="汪俊程">
<title>工程师之路</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: rgba(0, 0, 0, 0.8); padding: 0; margin: 0; font-family: "Noto Serif", "DejaVu Serif", serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.spread { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.45; color: #7a2518; font-weight: normal; margin-top: 0; margin-bottom: 0.25em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #2156a5; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #1d4b8f; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Open Sans", "DejaVu Sans", sans-serif; font-weight: 300; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.0125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #ddddd8; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace; font-weight: normal; color: rgba(0, 0, 0, 0.9); }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: rgba(0, 0, 0, 0.8); border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.9375em; color: rgba(0, 0, 0, 0.6); }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: rgba(0, 0, 0, 0.6); }

blockquote, blockquote p { line-height: 1.6; color: rgba(0, 0, 0, 0.85); }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dedede; }
table thead, table tfoot { background: #f7f8f7; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: rgba(0, 0, 0, 0.8); text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: rgba(0, 0, 0, 0.8); }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f8f8f7; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }

body { tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; word-spacing: -0.05em; }
h1 strong, h2 strong, h3 strong, #toctitle strong, .sidebarblock > .content > .title strong, h4 strong, h5 strong, h6 strong { font-weight: 400; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: 0.9375em; font-style: normal !important; letter-spacing: 0; padding: 0.1em 0.5ex; word-spacing: -0.15em; background-color: #f7f7f8; -webkit-border-radius: 4px; border-radius: 4px; line-height: 1.45; text-rendering: optimizeSpeed; border: 1px dashed #2f6fab;}

pre {border: 1px dashed gray;}

pre, pre > code { line-height: 1.45; color: rgba(0, 0, 0, 0.9); font-family: "Droid Sans Mono", "DejaVu Sans Mono", "Monospace", monospace; font-weight: normal; text-rendering: optimizeSpeed;}

.keyseq { color: rgba(51, 51, 51, 0.8); }

kbd { font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace; display: inline-block; color: rgba(0, 0, 0, 0.8); font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: rgba(0, 0, 0, 0.8); }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

p a > code:hover { color: rgba(0, 0, 0, 0.9); }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: rgba(0, 0, 0, 0.85); margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #ddddd8; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #ddddd8; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #ddddd8; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: rgba(0, 0, 0, 0.6); display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: rgba(0, 0, 0, 0.85); }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: rgba(0, 0, 0, 0.85); }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: rgba(0, 0, 0, 0.85); border-bottom: 1px solid #ddddd8; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 1px solid #efefed; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: "Open Sans", "DejaVu Sans", sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #7a2518; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f8f8f7; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #efefed; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #efefed; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #e0e0dc; margin-bottom: 1.25em; padding: 1.25em; background: #f8f8f7; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: rgba(0, 0, 0, 0.8); padding: 1.25em; }

#footer-text { color: rgba(255, 255, 255, 0.8); line-height: 1.44; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { .sect1 { padding-bottom: 1.25em; } }
.sect1 + .sect1 { border-top: 1px solid #efefed; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; font-family: "Noto Serif", "DejaVu Serif", serif; font-size: 1rem; font-style: italic; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: rgba(0, 0, 0, 0.85); }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: "Open Sans", "DejaVu Sans", sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #ddddd8; color: rgba(0, 0, 0, 0.6); }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #e0e0dc; margin-bottom: 1.25em; padding: 1.25em; background: #f8f8f7; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; text-align: center; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.listingblock pre:not(.highlight) {color: white; background: #002b36; }

.literalblock pre, .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #f7f7f8; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { -webkit-border-radius: 4px; border-radius: 4px; word-wrap: break-word; padding: 1em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #f7f7f8; background-color: rgba(0, 0, 0, 0.9); }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 1em; -webkit-border-radius: 4px; border-radius: 4px; }

.listingblock pre.prettyprint { border-width: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; line-height: 1.45; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #ddddd8; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: rgba(0, 0, 0, 0.85); font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #7a2518; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid rgba(0, 0, 0, 0.6); }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: rgba(0, 0, 0, 0.85); font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.9375em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: rgba(0, 0, 0, 0.6); }

.quoteblock.abstract { margin: 0 0 1.25em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dedede; }

table.grid-all th.tableblock, table.grid-all td.tableblock { border-width: 0 1px 1px 0; }

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock { border-width: 1px 1px 0 0; }

table.grid-cols th.tableblock, table.grid-cols td.tableblock { border-width: 0 1px 0 0; }

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-rows th.tableblock, table.grid-rows td.tableblock { border-width: 0 0 1px 0; }

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock { border-bottom-width: 0; }

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock { border-width: 1px 0 0 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.6; background: #f7f8f7; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: rgba(0, 0, 0, 0.8); font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1em; font-size: 0.85em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { width: 1em; position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 1.25em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 0.75em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.05em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #19407c; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: rgba(0, 0, 0, 0.8); -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

dt, th.tableblock, td.content, div.footnote { text-rendering: optimizeLegibility; }

h1, h2, p, td.content, span.alt { letter-spacing: -0.01em; }

p strong, td.content strong, div.footnote strong { letter-spacing: -0.005em; }

p, blockquote, dt, td.content, span.alt { font-size: 1.0625rem; }

p { margin-bottom: 1.25rem; }

.sidebarblock p, .sidebarblock dt, .sidebarblock td.content, p.tableblock { font-size: 1em; }

.exampleblock > .content { background-color: #fffef7; border-color: #e0e0dc; -webkit-box-shadow: 0 1px 4px #e0e0dc; box-shadow: 0 1px 4px #e0e0dc; }

.print-only { display: none !important; }

@media print { @page { margin: 1.25cm 0.75cm; }
  * { -webkit-box-shadow: none !important; box-shadow: none !important; text-shadow: none !important; }
  a { color: inherit !important; text-decoration: underline !important; }
  a.bare, a[href^="#"], a[href^="mailto:"] { text-decoration: none !important; }
  a[href^="http:"]:not(.bare):after, a[href^="https:"]:not(.bare):after { content: "(" attr(href) ")"; display: inline-block; font-size: 0.875em; padding-left: 0.25em; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  pre, blockquote, tr, img, object, svg { page-break-inside: avoid; }
  thead { display: table-header-group; }
  svg { max-width: 100%; }
  p, blockquote, dt, td.content { font-size: 1em; orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  #toc, .sidebarblock, .exampleblock > .content { background: none !important; }
  #toc { border-bottom: 1px solid #ddddd8 !important; padding-bottom: 0 !important; }
  .sect1 { padding-bottom: 0 !important; }
  .sect1 + .sect1 { border: 0 !important; }
  #header > h1:first-child { margin-top: 1.25rem; }
  body.book #header { text-align: center; }
  body.book #header > h1:first-child { border: 0 !important; margin: 2.5em 0 1em 0; }
  body.book #header .details { border: 0 !important; display: block; padding: 0 !important; }
  body.book #header .details span:first-child { margin-left: 0 !important; }
  body.book #header .details br { display: block; }
  body.book #header .details br + span:before { content: none !important; }
  body.book #toc { border: 0 !important; text-align: left !important; padding: 0 !important; margin: 0 !important; }
  body.book #toc, body.book #preamble, body.book h1.sect0, body.book .sect1 > h2 { page-break-before: always; }
  .listingblock code[data-lang]:before { display: block; }
  #footer { background: none !important; padding: 0 0.9375em; }
  #footer-text { color: rgba(0, 0, 0, 0.6) !important; font-size: 0.9em; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }

</style>
<link rel="stylesheet" href="css/font-awesome.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>工程师之路</h1>
<div class="details">
<span id="author" class="author">汪俊程</span><br>
<span id="email" class="email"><a href="mailto:wjcml@foxmail.com">wjcml@foxmail.com</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">目录</div>
<ul class="sectlevel1">
<li><a href="#_前言_by_汪俊程">前言 by 汪俊程</a></li>
<li><a href="#_Nginx_chapter">1. Nginx</a>
<ul class="sectlevel2">
<li><a href="#_打包nginx">1.1. 打包nginx</a></li>
<li><a href="#_免安装nginx">1.2. 免安装nginx</a></li>
<li><a href="#_nginx_vue_配置">1.3. Nginx + Vue 配置</a></li>
<li><a href="#_nginx_mysql">1.4. Nginx + MySQL</a>
<ul class="sectlevel3">
<li><a href="#_nginx_mysql实现均衡负载">1.4.1. Nginx + mysql实现均衡负载</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_Java_chapter">2. Java</a>
<ul class="sectlevel2">
<li><a href="#_springboot">2.1. SpringBoot</a>
<ul class="sectlevel3">
<li><a href="#_普通类获取springboot容器管理的bean的类">2.1.1. 普通类获取SpringBoot容器管理的bean的类</a></li>
<li><a href="#_springboot_maven_打包依赖">2.1.2. Springboot maven 打包依赖</a></li>
</ul>
</li>
<li><a href="#_springboot中xml和map的相互转化">2.2. springboot中xml和map的相互转化</a></li>
<li><a href="#_springboot读写分离">2.3. springboot读写分离</a></li>
<li><a href="#_springbootjar包的systemd启动模板">2.4. springboot+jar包的systemd启动模板</a></li>
</ul>
</li>
<li><a href="#_Maven_chapter">3. Maven</a>
<ul class="sectlevel2">
<li><a href="#_安装">3.1. 安装</a>
<ul class="sectlevel3">
<li><a href="#_archlinux_安装_maven">3.1.1. archLinux 安装 maven</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_ArchLinux_chapter">4. ArchLinux</a>
<ul class="sectlevel2">
<li><a href="#_arch安装">4.1. arch安装</a>
<ul class="sectlevel3">
<li><a href="#_制作系统盘">4.1.1. 制作系统盘</a></li>
<li><a href="#_检查引导方式">4.1.2. 检查引导方式</a></li>
<li><a href="#_更新系统时间">4.1.3. 更新系统时间</a></li>
<li><a href="#_分区和格式化">4.1.4. 分区和格式化</a></li>
<li><a href="#_格式化分区">4.1.5. 格式化分区</a></li>
<li><a href="#_挂载分区">4.1.6. 挂载分区</a></li>
<li><a href="#_设置国内镜像源">4.1.7. 设置国内镜像源</a></li>
<li><a href="#_安装基础包">4.1.8. 安装基础包</a></li>
<li><a href="#_开机挂载分区">4.1.9. 开机挂载分区</a></li>
<li><a href="#_换到全新_arch_linux_系统">4.1.10. 换到全新 Arch Linux 系统</a></li>
<li><a href="#_设置时区">4.1.11. 设置时区</a></li>
<li><a href="#_本地化语言支持">4.1.12. 本地化语言支持</a></li>
<li><a href="#_键盘布局">4.1.13. 键盘布局</a></li>
<li><a href="#_设置主机名">4.1.14. 设置主机名</a></li>
<li><a href="#_设置root密码">4.1.15. 设置root密码</a></li>
<li><a href="#_创建用户">4.1.16. 创建用户</a></li>
<li><a href="#_安装grub引导">4.1.17. 安装Grub引导</a></li>
<li><a href="#_安装桌面">4.1.18. 安装桌面</a></li>
<li><a href="#_重启">4.1.19. 重启</a></li>
<li><a href="#_增加_archlinuxcn">4.1.20. 增加 <code>archlinuxcn</code></a></li>
<li><a href="#_安装常用软件">4.1.21. 安装常用软件</a></li>
<li><a href="#_系统设置">4.1.22. 系统设置</a></li>
</ul>
</li>
<li><a href="#_安装yay_yaourt">4.2. 安装yay, yaourt</a>
<ul class="sectlevel3">
<li><a href="#_安装yaourt">4.2.1. 安装yaourt</a></li>
<li><a href="#_安装yay">4.2.2. 安装yay</a></li>
</ul>
</li>
<li><a href="#_常用的软件安装">4.3. 常用的软件安装</a>
<ul class="sectlevel3">
<li><a href="#_安装wps">4.3.1. 安装wps</a></li>
<li><a href="#_安装微信">4.3.2. 安装微信</a></li>
<li><a href="#_安装qq轻聊版">4.3.3. 安装QQ轻聊版</a></li>
<li><a href="#_安装网易云音乐">4.3.4. 安装网易云音乐</a></li>
<li><a href="#_安装钉钉">4.3.5. 安装钉钉</a></li>
<li><a href="#_安装vscode">4.3.6. 安装vscode</a></li>
<li><a href="#_安装redis_desktop_manager">4.3.7. 安装redis-desktop-manager</a></li>
<li><a href="#_安装clash配置代理">4.3.8. 安装clash，配置代理</a></li>
<li><a href="#_安装微信开发者工具">4.3.9. 安装微信开发者工具</a></li>
<li><a href="#_安装企业微信">4.3.10. 安装企业微信</a></li>
</ul>
</li>
<li><a href="#_基础操作">4.4. 基础操作</a></li>
<li><a href="#_archlinux输入法ibus">4.5. archlinux输入法&#8212;&#8203;ibus</a>
<ul class="sectlevel3">
<li><a href="#_ibus安装">4.5.1. ibus安装</a></li>
<li><a href="#_ibus启动失败">4.5.2. ibus启动失败</a></li>
</ul>
</li>
<li><a href="#_archlinux常见问题">4.6. archlinux常见问题</a>
<ul class="sectlevel3">
<li><a href="#_archlinux没有声音">4.6.1. archlinux没有声音</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_MongoDB_chapter">5. MongoDB</a>
<ul class="sectlevel2">
<li><a href="#_安装_2">5.1. 安装</a>
<ul class="sectlevel3">
<li><a href="#_基于_archlinux">5.1.1. 基于 <code>ArchLinux</code></a>
<ul class="sectlevel4">
<li><a href="#_解压包安装">解压包安装</a></li>
<li><a href="#_yaourt安装">yaourt安装</a></li>
</ul>
</li>
<li><a href="#_基于_centos8">5.1.2. 基于 <code>CentOS8</code></a>
<ul class="sectlevel4">
<li><a href="#_安装_3">安装</a></li>
<li><a href="#_配置">配置</a></li>
<li><a href="#_创建用户_2">创建用户</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_mongodb使用">5.2. mongodb使用</a>
<ul class="sectlevel3">
<li><a href="#_创建删除数据库">5.2.1. 创建，删除数据库</a></li>
<li><a href="#_创建删除集合">5.2.2. 创建，删除集合</a></li>
<li><a href="#_插入文档">5.2.3. 插入文档</a></li>
<li><a href="#_查询文档">5.2.4. 查询文档</a></li>
<li><a href="#_更新文档">5.2.5. 更新文档</a></li>
<li><a href="#_删除文档">5.2.6. 删除文档</a></li>
<li><a href="#_索引">5.2.7. 索引</a></li>
<li><a href="#_聚合">5.2.8. 聚合</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_Redis_chapter">6. Redis</a>
<ul class="sectlevel2">
<li><a href="#_redis安装">6.1. redis安装</a>
<ul class="sectlevel3">
<li><a href="#_基于_arch_包管理安装">6.1.1. 基于 <code>arch</code> 包管理安装</a></li>
<li><a href="#_基于centos8解压安装">6.1.2. 基于centos8解压安装</a></li>
</ul>
</li>
<li><a href="#_6种数据类型">6.2. 6种数据类型</a></li>
<li><a href="#_哨兵模式">6.3. 哨兵模式</a></li>
<li><a href="#_悲观锁和乐观锁">6.4. 悲观锁和乐观锁</a></li>
</ul>
</li>
<li><a href="#_ElasticSearch_chapter">7. ElasticSearch</a>
<ul class="sectlevel2">
<li><a href="#_关于es">7.1. 关于ES</a></li>
<li><a href="#_elasticsearch安装">7.2. elasticsearch安装</a>
<ul class="sectlevel3">
<li><a href="#_包管理安装">7.2.1. 包管理安装</a></li>
<li><a href="#_解压安装">7.2.2. 解压安装</a></li>
</ul>
</li>
<li><a href="#_java_elasticsearch">7.3. java + elasticsearch</a>
<ul class="sectlevel3">
<li><a href="#_java_high_level_rest_client">7.3.1. Java High Level REST Client</a></li>
<li><a href="#_java_low_level_rest_client">7.3.2. Java Low Level REST Client</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_WireShark_chapter">8. WireShark</a>
<ul class="sectlevel2">
<li><a href="#_wireshark安装">8.1. wireshark安装</a></li>
</ul>
</li>
<li><a href="#_Kafka_chapter">9. Kafka</a>
<ul class="sectlevel2">
<li><a href="#_kafka安装配置">9.1. kafka安装配置</a>
<ul class="sectlevel3">
<li><a href="#_linux">9.1.1. linux</a>
<ul class="sectlevel4">
<li><a href="#_systemd启动">systemd启动</a></li>
</ul>
</li>
<li><a href="#_windows">9.1.2. windows</a></li>
<li><a href="#_kafka对外开放">9.1.3. kafka对外开放</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_RabbitMQ_chapter">10. RabbitMQ</a>
<ul class="sectlevel2">
<li><a href="#_rabbitmq安装">10.1. RabbitMq安装</a>
<ul class="sectlevel3">
<li><a href="#_安装_4">10.1.1. 安装</a></li>
</ul>
</li>
<li><a href="#_rabbitmqctl">10.2. rabbitmqctl</a></li>
</ul>
</li>
<li><a href="#_zookeeper_chapter">11. zookeeper</a>
<ul class="sectlevel2">
<li><a href="#_zookeeper_安装">11.1. zookeeper 安装</a>
<ul class="sectlevel3">
<li><a href="#_安装_5">11.1.1. 安装</a></li>
<li><a href="#_运行">11.1.2. 运行</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_MySQL_chapter">12. MySQL</a>
<ul class="sectlevel2">
<li><a href="#_安装_6">12.1. 安装</a>
<ul class="sectlevel3">
<li><a href="#_archlinux">12.1.1. ArchLinux</a></li>
<li><a href="#_免安装版配置">12.1.2. 免安装版配置</a></li>
</ul>
</li>
<li><a href="#_常用配置">12.2. 常用配置</a>
<ul class="sectlevel3">
<li><a href="#_常用用户配置">12.2.1. 常用用户配置</a></li>
</ul>
</li>
<li><a href="#_mysql备份和还原">12.3. MySQL备份和还原</a></li>
<li><a href="#_索引_2">12.4. 索引</a></li>
<li><a href="#_mysqldump">12.5. mysqldump</a></li>
</ul>
</li>
<li><a href="#_SpringCloud_chapter">13. SpringCloud</a>
<ul class="sectlevel2">
<li><a href="#_相关文档">13.1. 相关文档</a></li>
<li><a href="#_什么是spring_cloud">13.2. 什么是spring cloud</a></li>
<li><a href="#_springboot和springcloud的对应关系">13.3. springboot和springcloud的对应关系</a></li>
</ul>
</li>
<li><a href="#_AsciiDoc_chapter">14. AsciiDoc</a>
<ul class="sectlevel2">
<li><a href="#_语法快速参考">14.1. 语法快速参考</a></li>
</ul>
</li>
<li><a href="#_Git_chapter">15. Git</a>
<ul class="sectlevel2">
<li><a href="#_git配置">15.1. git配置</a></li>
</ul>
</li>
<li><a href="#_设计模式_chapter">16. 设计模式</a></li>
<li><a href="#_systemd_chapter">17. systemd</a></li>
<li><a href="#_Linux_chapter">18. Linux</a>
<ul class="sectlevel2">
<li><a href="#_基本命令操作">18.1. 基本命令操作</a></li>
<li><a href="#_wsl">18.2. WSL</a></li>
<li><a href="#_linux无密码登录">18.3. Linux无密码登录</a></li>
<li><a href="#_配置客户端私钥">18.4. 配置客户端私钥</a></li>
</ul>
</li>
<li><a href="#_Python_chapter">19. Python</a>
<ul class="sectlevel2">
<li><a href="#_安装_7">19.1. 安装</a>
<ul class="sectlevel3">
<li><a href="#_python3_8">19.1.1. python3.8</a></li>
</ul>
</li>
<li><a href="#_日志输出">19.2. 日志输出</a></li>
</ul>
</li>
<li><a href="#_Proxy_chapter">20. Proxy</a>
<ul class="sectlevel2">
<li><a href="#_全局代理">20.1. 全局代理</a></li>
<li><a href="#_proxychains">20.2. proxychains</a>
<ul class="sectlevel3">
<li><a href="#_安装_8">20.2.1. 安装</a></li>
<li><a href="#_配置单个代理">20.2.2. 配置单个代理</a></li>
<li><a href="#_配置多个代理">20.2.3. 配置多个代理</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_Spider_chapter">21. 爬虫及反爬策略</a>
<ul class="sectlevel2">
<li><a href="#_反爬虫策略及解决办法">21.1. 反爬虫策略及解决办法</a></li>
<li><a href="#_针对反自动化爬虫策略以及解决办法">21.2. 针对反自动化爬虫策略以及解决办法</a></li>
</ul>
</li>
<li><a href="#_高并发_chapter">22. 高并发</a>
<ul class="sectlevel2">
<li><a href="#_高并发解决方案">22.1. 高并发解决方案</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_前言_by_汪俊程">前言 by 汪俊程</h2>
<div class="sectionbody">
<div class="paragraph">
<p>一本关于个人成长、软件开发、系统运维、产品运营、思维、思考的杂记。</p>
</div>
<div class="paragraph">
<p>参考文档地址: <a href="https://github.com/fifilyu/SystemEngineerInAction" class="bare">https://github.com/fifilyu/SystemEngineerInAction</a></p>
</div>
<div class="paragraph">
<p>金步国作品集: <a href="http://www.jinbuguo.com/" class="bare">http://www.jinbuguo.com/</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Nginx_chapter">1. Nginx</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_打包nginx">1.1. 打包nginx</h3>
<div class="paragraph">
<p>基于 <code>centos8</code> ，将 <code>nignx</code> 安装编译，打包为一个压缩文件，可以提供给其他的系统，不用做其他的配置，直接解压就可以使用。</p>
</div>
<div class="listingblock">
<div class="title">安装需要的环境和依赖</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">yum install -y gcc gcc-c++ make automake autoconf libtool pcre pcre-devel zlib zlib-devel openssl openssl-devel</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">下载nginx, 解压，重命名</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd /usr/local
wget http://nginx.org/download/nginx-1.20.1.tar.gz
tar xzf nginx-1.20.1.tar.gz
mv nginx-1.20.1 nginx</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">执行configure</div>
<p>这里需要注意相应配置的路径</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd /usr/local/nginx/

./configure \
--prefix=/usr/local/nginx \
--pid-path=/usr/local/nginx/nginx.pid \
--lock-path=/usr/local/nginx/nginx.lock \
--error-log-path=/usr/local/nginx/logs/error.log \
--http-log-path=/usr/local/nginx/logs/access.log \
--with-http_gzip_static_module \
--http-client-body-temp-path=/usr/local/nginx/temp/client \
--http-proxy-temp-path=/usr/local/nginx/temp/proxy \
--http-fastcgi-temp-path=/usr/local/nginx/temp/fastcgi \
--http-uwsgi-temp-path=/usr/local/nginx/temp/uwsgi \
--http-scgi-temp-path=/usr/local/nginx/temp/scgi \
--with-http_stub_status_module \
--with-http_ssl_module</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">编译</div>
<p>这里编译可能会有错误提示，不用管</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">make &amp;&amp; make install</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">创建文件夹</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mkdir /usr/local/nginx/temp/
mkdir /usr/local/nginx/logs/</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">启动nginx，访问 <code>http：//27.0.0.1:80</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd /usr/local/nginx/sbin
./nginx

# 查看是否有nginx进程
ps -ef | grep nginx</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">打包（压缩）nginx</div>
<p>将nginx所在的文件夹，打包为 <code>nginx.tar.gz</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd /usr/local
tar -zcvf nginx.tar.gz ./nginx</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_免安装nginx">1.2. 免安装nginx</h3>
<div class="paragraph">
<p>这里安装配置，免安装版本的 <code>nginx</code> ，就是上面所提供的 <code>nginx.tar.gz</code></p>
</div>
<div class="listingblock">
<div class="title">解压</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">注意，这个压缩包必须解压到 `/usr/local` 下，因为在打包 `nginx` 之前，执行的 `./configre` 命令，其中指定了相关的 `nginx` 配置文件夹路径，解压的位置需要和 `--prefix=/usr/local/nginx` 保持一致。
----
d /usr/local
tar xzf nginx.tar.gz
----</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">添加systemd</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/systemd/system/nginx.service

[Unit]
Description=nginx-The High-performance HTTP Server
After=network.target

[Service]
Type=forking
ExecStart=/usr/local/nginx/sbin/nginx
ExecReload=/usr/local/nginx/sbin/nginx -s reload
ExecStop=/usr/local/nginx/sbin/nginx -s stop
PrivateTmp=true

[Install]
WantedBy=multi-user.target

EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">添加开机启动</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">systemctl start nginx
systemctl enable nginx</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_nginx_vue_配置">1.3. Nginx + Vue 配置</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 创建conf.d文件夹，用来存放server，如果存在则不需要创建
sudo mkdir /etc/nginx/conf.d/

# 编辑nginx.conf
sudo vim /etc/nginx/nginx.conf

# 与nginx.conf中server平级，添加以下语句
include /etc/nginx/conf.d/*.conf;

# 创建一个.conf文件
vim /etc/nginx/conf.d/redas.conf
# 然后添加下列语句
server {
    listen 9797;
    server_name 127.0.0.1;

    location / {
        root  vue进行build后的dist文件路径;
        index  index.html;
        try_files $uri $uri/ /index.html last;

  }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
注意：在配置完成，重启nginx后，访问vue项目中的路由，报403，检查 <code>vue进行build后的dist文件路径</code> 的权限，若放在用户家目录下，通过 <code>chmod 777 /home/用户家目录名</code> 打开权限
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_nginx_mysql">1.4. Nginx + MySQL</h3>
<div class="sect3">
<h4 id="_nginx_mysql实现均衡负载">1.4.1. Nginx + mysql实现均衡负载</h4>
<div class="paragraph">
<p>Nginx + mysql实现均衡负载的配置方式</p>
</div>
<div class="listingblock">
<div class="title">方式一</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo vim /etc/nginx/nginx.conf
# 在nginx.conf文件中，与http平级，添加stream，如下
stream {
    include /etc/nginx/read.conf;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">方式二</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 创建.conf文件
sudo vim /etc/nginx/read.conf

# 添加以下到read.conf
upstream read {
    # 多台mysql的地址
    server  198.168.0.10:3306;
    server  198.168.0.20:3306;
    server  198.168.0.30:3306;
}
server {
    listen 3307;

    proxy_pass read;
}

# 编辑nginx.conf
sudo vim /etc/nginx/nginx.conf
# 在nginx.conf文件中，与http平级，添加stream，如下
stream {
    # /etc/nginx/read.conf 是配置文件绝对路径
    include /etc/nginx/read.conf;
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
nginx默认的负载均衡是轮询方式，但nginx有多种方式进行负载均衡，根据不同需求进行选择，相关方法请查阅相关资料
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Java_chapter">2. Java</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_springboot">2.1. SpringBoot</h3>
<div class="sect3">
<h4 id="_普通类获取springboot容器管理的bean的类">2.1.1. 普通类获取SpringBoot容器管理的bean的类</h4>
<div class="listingblock">
<div class="title">1. 首先创建一个用于获取bean的类</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Component
public class CommonClassGetBean implements ApplicationContextAware {

    private static ApplicationContext applicationContext;

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
        if(CommonClassGetBean.applicationContext == null) {
            CommonClassGetBean.applicationContext = applicationContext;
        }
    }

    //获取applicationContext
    public static ApplicationContext getApplicationContext() {
        return applicationContext;
    }

    //通过name获取 Bean.
    public static Object getBean(String name){
        return getApplicationContext().getBean(name);
    }

    //通过class获取Bean.
    public static &lt;T&gt; T getBean(Class&lt;T&gt; clazz){
        return getApplicationContext().getBean(clazz);
    }

    //通过name,以及Clazz返回指定的Bean
    public static &lt;T&gt; T getBean(String name,Class&lt;T&gt; clazz){
        return getApplicationContext().getBean(name, clazz);
    }

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">2. 然后创建一个bean</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
public class AccessUrlConfig {
    @Value("${redas.access_url.do_main}")
    private String doMain;

    @Bean
    public String getDoMain() {
        return doMain;
    }

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">3. 最后通过CommonClassGetBean.getBean得到需要的bean</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class GetBeanDemo {
    public String commonClassGetBean() {
        System.out.println(CommonClassGetBean.getBean("getDoMain"))
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_springboot_maven_打包依赖">2.1.2. Springboot maven 打包依赖</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
            &lt;plugin&gt;
                &lt;!-- 在打包 war 文件时，排除 tomcat-embed 相关的 jar 包，防止与 Tomcat 服务器冲突 --&gt;
                &lt;!-- 并且，相比修改依赖的方式：
                    &lt;dependency&gt;
                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;
                        &lt;scope&gt;provided&lt;/scope&gt;
                    &lt;/dependency&gt;
                    排除 jar 这种方式不会影响在 IDE 工具中直接运行启动类。
                 --&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;packagingExcludes&gt;WEB-INF/lib/tomcat-embed-*.jar&lt;/packagingExcludes&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_springboot中xml和map的相互转化">2.2. springboot中xml和map的相互转化</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/**
 * xml处理
 */
public class XmlProcess {
    /**
    * 将xml转化为map
    */
    public Map&lt;String, String&gt; toMap(String xmlStr) {
        Map&lt;String, String&gt; map = new HashMap&lt;&gt;();

        SAXReader reader = new SAXReader();
        try {
            Document document = reader.read(new StringReader(xmlStr));
            Element element = document.getRootElement();

            List&lt;Element&gt; elementList = element.elements();
            for (Element e : elementList) {
                map.put(e.getName(), e.getText());
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        return map;
    }

    /**
     * 将返回的消息对象转成xml
     * @param messageBaseEntity 一个实体对象
     * @return
     */
    public String ToXml(MessageBaseEntity messageBaseEntity) {
        XStream xstream = new XStream();
        xstream.alias("xml", messageBaseEntity.getClass());

        return xstream.toXML(messageBaseEntity);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_springboot读写分离">2.3. springboot读写分离</h3>
<div class="paragraph">
<p>springboot + jpa + HicariCP + MySQL 读写分离</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/wjcml/java_engineer_road_code/tree/master/spring_read_write_split_for_code" class="bare">https://github.com/wjcml/java_engineer_road_code/tree/master/spring_read_write_split_for_code</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_springbootjar包的systemd启动模板">2.4. springboot+jar包的systemd启动模板</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cat &lt;&lt; EOF &gt; /usr/lib/systemd/system/service_name.service
[Unit]
Description=service description
After=network.target remote-fs.target nss-lookup.target

[Service]
Type=simple
Environment="PORT=8080"
Environment="CONFIG_FILE=/path/to/application.yml"
Environment="JAR_FILE=/path/to/application_name-1.0.0.jar"
Environment="LOG_FILE=/path/to/error.log"

User=root
Group=root
WorkingDirectory=working_path
ExecStart=/usr/bin/java -Dlogging.file=${LOG_FILE} -Dserver.port=${PORT} -Dspring.config.location=${CONFIG_FILE} -jar ${JAR_FILE}
SuccessExitStatus=143
StandardOutput=null
StandardError=journal

[Install]
WantedBy=multi-user.target
EOF</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Maven_chapter">3. Maven</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_安装">3.1. 安装</h3>
<div class="sect3">
<h4 id="_archlinux_安装_maven">3.1.1. archLinux 安装 maven</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo pacman -S maven

sudo vim /home/家目录名称/.m2/settings.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>在settings.xml中添加如下配置</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
            http://maven.apache.org/xsd/settings-1.0.0.xsd"&gt;

	&lt;!-- 这个是配置阿里Maven镜像 --&gt;
	&lt;mirrors&gt;
		&lt;mirror&gt;
		  &lt;id&gt;aliyun&lt;/id&gt;
		  &lt;name&gt;aliyun&lt;/name&gt;
		  &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;
		  &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;
		&lt;/mirror&gt;
	&lt;/mirrors&gt;

	&lt;profiles&gt;
		&lt;profile&gt;
			&lt;id&gt;nexus&lt;/id&gt;
			&lt;repositories&gt;
				&lt;repository&gt;
					&lt;id&gt;central&lt;/id&gt;
					&lt;url&gt;http://repo.maven.apache.org/maven2&lt;/url&gt;
					&lt;snapshots&gt;
						&lt;enabled&gt;false&lt;/enabled&gt;
					&lt;/snapshots&gt;
				&lt;/repository&gt;
				&lt;repository&gt;
					&lt;id&gt;ansj-repo&lt;/id&gt;
					&lt;name&gt;ansj Repository&lt;/name&gt;
					&lt;url&gt;http://maven.nlpcn.org/&lt;/url&gt;
					&lt;snapshots&gt;
						&lt;enabled&gt;false&lt;/enabled&gt;
					&lt;/snapshots&gt;
				&lt;/repository&gt;
			&lt;/repositories&gt;
		&lt;/profile&gt;
	&lt;/profiles&gt;

	&lt;activeProfiles&gt;
		&lt;activeProfile&gt;nexus&lt;/activeProfile&gt;
	&lt;/activeProfiles&gt;
&lt;/settings&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ArchLinux_chapter">4. ArchLinux</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_arch安装">4.1. arch安装</h3>
<div class="paragraph">
<p><a href="https://www.viseator.com/2017/05/17/arch_install/">archlinux 安装参考文档一</a><br>
<a href="https://fifilyu.github.io/seia/#_ArchLinux_chapter">archlinux 安装参考文档二</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
archlinux安装需要联网，建议使用网线，这里的文档暂不提供wifi安装，需要wifi安装，可以参考【archlinux 安装参考文档一】
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_制作系统盘">4.1.1. 制作系统盘</h4>
<div class="paragraph">
<div class="title">windows下</div>
<p>下载 <strong>Rufus</strong> 制作启动盘工具</p>
</div>
<div class="paragraph">
<div class="title">linux下</div>
<p>使用 <strong>dd</strong> 命令</p>
</div>
</div>
<div class="sect3">
<h4 id="_检查引导方式">4.1.2. 检查引导方式</h4>
<div class="paragraph">
<p>目前的引导方式主要分为 <strong>EFI引导+GPT分区表</strong> 与 <strong>BIOS(LEGACY)引导+MBR分区表</strong> 两种，几乎比较新的机器都采用了EFI/GPT引导的方式。</p>
</div>
<div class="paragraph">
<p>如果不知道自己的引导方式，执行下列命令</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ls /sys/firmware/efi/efivars</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果执行该命令输出</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ls: cannot access '/sys/firmware/efi/efivars': No such file or directory</pre>
</div>
</div>
<div class="paragraph">
<p>表明你是以BIOS方式引导，否则为以EFI方式引导。</p>
</div>
</div>
<div class="sect3">
<h4 id="_更新系统时间">4.1.3. 更新系统时间</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">timedatectl set-ntp true</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_分区和格式化">4.1.4. 分区和格式化</h4>
<div class="listingblock">
<div class="title">查看分区情况</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">fdisk -l</code></pre>
</div>
</div>
<div class="paragraph">
<p>我这里使用一块238.5G的硬盘（<strong>/dev/sda</strong>）</p>
</div>
<div class="listingblock">
<div class="title">创建一个引导分区</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">fdisk /dev/sda</code></pre>
</div>
</div>
<div class="paragraph">
<p>1.如果你是一块全新的硬盘：输入 <strong>g</strong> 来创建一个全新的 <strong>gpt</strong> 分区表，否则直接进行第2步。</p>
</div>
<div class="paragraph">
<p>2.输入 <strong>n</strong> 创建一个新的分区，输入 <strong>+512M</strong> 来创建一个 <strong>512M</strong> 的引导分区。</p>
</div>
<div class="paragraph">
<p>3.输入 <strong>p</strong> 来查看新创建的分区。</p>
</div>
<div class="paragraph">
<p>4.输入 <strong>t</strong> 并选择新创建的分区序号来更改分区的类型，输入 <strong>l</strong> 可以查看所有支持的类型，输入 <strong>ef</strong> 更改分区的类型为EFI。</p>
</div>
<div class="paragraph">
<p>5.输入 <strong>w</strong> 来将之前所有的操作写入磁盘生效，在这之前可以输入 <strong>p</strong> 来确认自己的分区表没有错误。</p>
</div>
<div class="paragraph">
<p>现在引导分区就创建好了。</p>
</div>
<div class="listingblock">
<div class="title">创建根分区</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">fdisk /dev/sda</code></pre>
</div>
</div>
<div class="paragraph">
<p>1.如果你是一块全新的硬盘（否则直接进行第2步）：</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>如果你是 <strong>BIOS/MBR</strong> 引导方式：输入 <strong>o</strong> 来创建一个全新的MBR分区表。</p>
</li>
<li>
<p>如果你在上一步新建了分区表并创建了引导分区：直接进行步骤2。</p>
</li>
<li>
<p>如果你在另一块硬盘中已经有引导分区：输入 <strong>g</strong> 来创建一个全新的 <strong>gpt</strong> 分区表。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>2.输入 <strong>n</strong> 创建一个新的分区，直接回车使用默认数值即可，然后可以输入结束扇区或是分区大小，如果我们想要使创建的分区完全占满空闲的空间，可以直接回车使用默认结束扇区。</p>
</div>
<div class="paragraph">
<p>3.这时我们可以输入 <strong>p</strong> 来查看新创建的分区。</p>
</div>
<div class="paragraph">
<p>4.输入 <strong>w</strong> 来将之前所有的操作写入磁盘生效，在这之前可以输入 <strong>p</strong> 来确认自己的分区表没有错误。</p>
</div>
</div>
<div class="sect3">
<h4 id="_格式化分区">4.1.5. 格式化分区</h4>
<div class="listingblock">
<div class="title">格式化根分区</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># /dev/sda2 是刚刚创建的根分区
mkfs.ext4 /dev/sda2</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">格式化引导分区</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># /dev/sda1 是刚刚创建的引导分区
mkswap /dev/sda1
swapon /dev/sda1
mkfs.fat -F32 /dev/sda1</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_挂载分区">4.1.6. 挂载分区</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># /dev/sda2 是刚刚创建的根分区
mount /dev/sda2 /mnt</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>如果是EFI/GPT引导方式，执行以下命令创建/boot文件夹并将引导分区挂载到上面。BIOS/MBR引导方式无需进行这步。</p>
</div>
<div class="listingblock">
<div class="content">
<pre># /dev/sda1 是刚刚创建的引导分区
mkdir /mnt/boot
mount /dev/sda1 /mnt/boot</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_设置国内镜像源">4.1.7. 设置国内镜像源</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/pacman.d/mirrorlist
Server = https://mirrors.163.com/archlinux/\$repo/os/\$arch
EOF</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>这里推荐使用网易的镜像源，如果执行pacman下载包出现问题，可以再加上下面两个源</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Server = http://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch
Server = http://mirrors.zju.edu.cn/archlinux/$repo/os/$arch</pre>
</div>
</div>
<div class="paragraph">
<p>注意：在最近的更新中，archlinux 添加了 <code>/etc/pacman.d/mirrorlist.pacnew</code> 这个文件，在这个文件中放了很多镜像源，我们可以在该文件中的 <strong>China</strong> 下找到。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_安装基础包">4.1.8. 安装基础包</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">pacstrap /mnt base base-devel linux linux-firmware dhcpcd</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_开机挂载分区">4.1.9. 开机挂载分区</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_换到全新_arch_linux_系统">4.1.10. 换到全新 Arch Linux 系统</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">arch-chroot /mnt</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_设置时区">4.1.11. 设置时区</h4>
<div class="paragraph">
<p>依次执行如下命令设置我们的时区为上海并生成相关文件：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
hwclock --systohc</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_本地化语言支持">4.1.12. 本地化语言支持</h4>
<div class="listingblock">
<div class="title">启用语言参数：</div>
<div class="content">
<pre>echo "en_US.UTF-8 UTF-8" &gt;&gt; /etc/locale.gen
echo "zh_CN.GB18030 GB18030" &gt;&gt; /etc/locale.gen
echo "zh_CN.GBK GBK" &gt;&gt; /etc/locale.gen
echo "zh_CN.UTF-8 UTF-8" &gt;&gt; /etc/locale.gen
echo "zh_CN GB2312" &gt;&gt; /etc/locale.gen</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>除了使用上面的方式启用语言参数，也可以使用下面的这种方法,直接编辑 <code>/etc/locale.gen</code> 取消掉 <code>en_US.UTF-8 UTF-8</code>, <code>zh_CN.GB18030 GB18030</code>, <code>zh_CN.GBK GBK</code>, <code>zh_CN.UTF-8 UTF-8</code>, <code>zh_CN GB2312</code> 这几个前面的 <code>#</code> 号。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vim /etc/locale.gen</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">生成locale</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">locale-gen</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">设置系统默认语言</div>
<p>这里默认使用英语，如果要使用中文，将 <code>LANG=en_US.UTF-8</code> 替换成 <code>LANG=zh_CN.UTF-8</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">echo "LANG=en_US.UTF-8" &gt; /etc/locale.conf</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_键盘布局">4.1.13. 键盘布局</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">echo "KEYMAP=us" &gt; /etc/vconsole.conf</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_设置主机名">4.1.14. 设置主机名</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">echo '127.0.0.1 localhost' &gt; /etc/hosts
# 添加主机名对应的设置
echo '127.0.0.1 archlinux' &gt;&gt; /etc/hosts</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_设置root密码">4.1.15. 设置root密码</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">passwd</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_创建用户">4.1.16. 创建用户</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 新增用户：
useradd -m wjc

# 设置用户密码：
passwd wjc

# 添加到sudo列表：
pacman -S sudo
echo 'wjc   ALL=(ALL) ALL' &gt;&gt; /etc/sudoers</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_安装grub引导">4.1.17. 安装Grub引导</h4>
<div class="paragraph">
<p>如果是传统的方式启动的BIOS</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">pacman -S grub

grub-install --target=i386-pc --recheck /dev/sda

pacman -S linux linux-headers linux-lts linux-lts-headers

grub-mkconfig -o /boot/grub/grub.cfg</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果是使用UEFI启动的BIOS，请用以下方式安装和设置Grub引导：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">pacman -S grub efibootmgr

grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=arch

pacman -S linux linux-headers linux-lts linux-lts-headers

grub-mkconfig -o /boot/grub/grub.cfg</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_安装桌面">4.1.18. 安装桌面</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 更新软件包索引
pacman -Syy

# 桌面环境
pacman -S gnome vim

# WIFI驱动
pacman -S linux-firmware

# 拼音输入法
pacman -S ibus-sunpinyin sunpinyin sunpinyin-data

# 显卡驱动
pacman -S xf86-video-fbdev xf86-video-intel xf86-video-vesa xf86-video-ati xf86-video-amdgpu

# 汉字字体
pacman -S wqy-microhei wqy-zenhei

# 开机启动
systemctl enable NetworkManager
systemctl enable gdm</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_重启">4.1.19. 重启</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">exit

reboot</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_增加_archlinuxcn">4.1.20. 增加 <code>archlinuxcn</code></h4>
<div class="paragraph">
<p>增加 Arch Linux 中文社区仓库 的腾讯镜像服务器：<br>
Arch Linux 中文社区仓库 包含深度QQ、深度TIM、WPS、Google Chrome浏览器、WPS等等不开源的软件。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 进入root
sudo -i

cat &lt;&lt; EOF &gt;&gt; /etc/pacman.conf

[archlinuxcn]
Server = https://mirrors.cloud.tencent.com/archlinuxcn/\$arch
SigLevel = Optional TrustAll

EOF

exit</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_安装常用软件">4.1.21. 安装常用软件</h4>
<div class="paragraph">
<p>在桌面打开终端，复制以下命令一次性安装, 有可能出现，一次性安装会报错，不能安装成功的情况，建议一个一个的安装</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">pacman -Syy

pacman -S archlinuxcn-keyring

pacman -S gedit vim screen thunderbird thunderbird-i18n-zh-cn openssh bash-completion cmake git curl wget filezilla gcc make  mlocate  nginx ntp p7zip rsync virtualbox  virtualbox-guest-iso virtualbox-host-dkms file-roller parted sshpass rdesktop qt5 fakeroot google-chrome openssl wireshark-qt</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_系统设置">4.1.22. 系统设置</h4>
<div class="paragraph">
<p>在桌面打开终端，执行以下命令：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># GNOME 桌面设置
gsettings set org.gnome.nautilus.preferences always-use-location-entry true
gsettings set org.gnome.nautilus.preferences default-sort-order name
gsettings set org.gtk.Settings.FileChooser sort-directories-first true
gsettings set org.gnome.desktop.interface clock-show-date true
gsettings set org.gnome.desktop.interface clock-show-seconds true
# Ctrl+Shift+Alt+R 录像时，30秒后自动结束。设置为0,不限制
gsettings set org.gnome.settings-daemon.plugins.media-keys max-screencast-length 0

# virtualbox 设置
sudo gpasswd -a root vboxusers
sudo gpasswd -a $USER vboxusers

# wireshark 设置
sudo gpasswd -a root wireshark
sudo gpasswd -a $USER wireshark
sudo grpunconv

# 开机启动
systemctl enable systemd-timesyncd
systemctl start systemd-timesyncd
sudo systemctl enable sshd
sudo systemctl mask tmp.mount</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
默认不能使用 <code>root</code> 用户 SSH 连接 Arch Linux。请修改 <code>/etc/ssh/sshd_config</code> 中的 <code>PermitRootLogin</code> 为 <code>yes</code> 。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_安装yay_yaourt">4.2. 安装yay, yaourt</h3>
<div class="sect3">
<h4 id="_安装yaourt">4.2.1. 安装yaourt</h4>
<div class="paragraph">
<p><code>yaourt</code> 是 <code>aur</code> 助手，但是已经停止开发了，目前推荐使用其代替品，比如：<code>aurman</code>、<code>yay</code>、<code>pakku</code> 及 <code>aurutils</code>。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo pacman -S yaourt</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_安装yay">4.2.2. 安装yay</h4>
<div class="paragraph">
<p>参考文档： <a href="https://ywnz.com/linuxjc/6693.html">在Arch Linux下安装Yay、Pakku、Pacaur、Pikaur、Trizen、Aura</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo pacman -S git go base-devel

git clone https://aur.archlinux.org/yay.git

cd yay

makepkg -si

# 删除yay文件夹
cd ..
rm -rf yay</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>如果在执行 <code>yay</code> 命令时，出现了如下错误： <code>yay: error while loading shared libraries: libalpm.so.12: cannot open shared object file: No such file or directory</code></p>
</div>
<div class="paragraph">
<p>先执行 <code>sudo pacman -R yay</code> 命令，删除 <code>yay</code> ，然后再执行上述安装操作，重新安装一次 <code>yay</code></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_常用的软件安装">4.3. 常用的软件安装</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
下面有很多的安装软件方式是不推荐的，比较麻烦，推荐使用 <strong>wine 安装程序.exe</strong> 安装。
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_安装wps">4.3.1. 安装wps</h4>
<div class="paragraph">
<p>参考文档： <a href="https://www.ituring.com.cn/article/213260">安装 WPS Office (Arch Linux)</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">yay -S wps-office-cn wps-office-mui-zh-cn
yay -S wps-office-mime-cn
yay -S ttf-wps-fonts
yay -S ttf-ms-fonts
yay -S wps-office-fonts</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_安装微信">4.3.2. 安装微信</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">yay -S deepin-wine-wechat</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>如果执行安装命令，出现需要（缺少） <code>lib32-*</code> 相关依赖包的提示信息，需要启用 <code>multilib</code> 仓库，执行下列命令，并去掉仓库前面的 <code>#</code> 号。<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre># 编辑pacman.conf，去掉 multilib 前面的 # 号
sudo vim /etc/pacman.conf</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>安装成功后，如果微信的字体很模糊，是因为缺少 <code>windows</code> 字体，关闭微信, 将 <code>windows</code> 字体（字体目录：<code>C:\\Windows\\Fonts</code>）拷贝一份到 <code>~/.deepinwine/Deepin-WeChat/drive_c/windows/Fonts</code> 下，然后重启微信。</p>
</div>
</div>
<div class="sect3">
<h4 id="_安装qq轻聊版">4.3.3. 安装QQ轻聊版</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">yay -S deepin.com.qq.im.light</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_安装网易云音乐">4.3.4. 安装网易云音乐</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo pacman -S netease-cloud-music</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_安装钉钉">4.3.5. 安装钉钉</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">yay -S dingtalk-electron</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_安装vscode">4.3.6. 安装vscode</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo pacman -S code</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_安装redis_desktop_manager">4.3.7. 安装redis-desktop-manager</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">yay -S redis-desktop-manager</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_安装clash配置代理">4.3.8. 安装clash，配置代理</h4>
<div class="listingblock">
<div class="title">安装clash</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo pacman -S clash</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">启动clash, 并设置开启启动</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">systemctl start clash@'your username'
systemctl enable clash@'your username'</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">添加代理的配置</div>
<p><code>clash</code> 默认使用 ~/.config/clash/config.yaml作为配置文件。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 在该文件中添加代理配置
sudo vim ~/.config/clash/config.yaml</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>clash</code> 也可以指定配置文件启动，如果需指定配置文件启动，可以修改 <code>clash@.service</code> 文件。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>clash -d 'your config file'</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_安装微信开发者工具">4.3.9. 安装微信开发者工具</h4>
<div class="paragraph">
<p>先安装需要的依赖环境</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 安装wine、winetricks和gconf
sudo pacman -S wine winetricks gconf</code></pre>
</div>
</div>
<div class="paragraph">
<p>然后下载微信开发者工具</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 下载
git clone https://github.com/cytle/wechat_web_devtools.git
# 安装(下载一个大文件,安装时可能会出现异常error,ctrlC停止就行)
cd wechat_web_devtools
./bin/wxdt install
# 运行
./bin/wxdt</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_安装企业微信">4.3.10. 安装企业微信</h4>
<div class="paragraph">
<p>在archlinux下，安装windows的软件，需要 <strong>wine</strong> 依赖，wine 是一个兼容层，可以让linux运行windows的软件。</p>
</div>
<div class="paragraph">
<p>首先下载 企业微信 的 <code>.exe</code> 文件，然后右键选择该文件，使用 <strong>Wine Windows Program Loader</strong> 方式打开。</p>
</div>
<div class="paragraph">
<p>wine的映射磁盘文件是在主目录（即/home/用户名）下的 .wine 目录内，里面的 drive_c 实际上就是wine的映射c盘，以后执行exe的安装程序时，如果安装程序安装目录在 <code>C:/Program Files (x86)/test</code>，那么实际上这个文件就在你的linux的 <code>/home/用户名/.wine/drive_c/'Program Files (x86)'/test</code> 内。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_基础操作">4.4. 基础操作</h3>
<div class="listingblock">
<div class="title">更新archlinux索引</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo updatedb</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">yaourt</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">yaourt -S pakages</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">修改archlinux源</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">vim /etc/pacman.conf</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 使用archlinux官方源，更新系统或者软件时可能会很慢
[archlinuxcn]
Server = https://mirrors.cloud.tencent.com/archlinuxcn/$arch
SigLevel = Optional TrustAll</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_archlinux输入法ibus">4.5. archlinux输入法&#8212;&#8203;ibus</h3>
<div class="sect3">
<h4 id="_ibus安装">4.5.1. ibus安装</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo pacman -S ibus</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ibus启动失败">4.5.2. ibus启动失败</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
若遇到更新arch，输入法启动失败，按照以下步骤恢复
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># $HOME指的是家目录
cd $HOME/.config/autostart

# 创建ibus.desktop文件
vim ibus.desktop

# 然后在ibus.desktop中写下以下命令
[Desktop Entry]
Type=Application
Name=ibus
Exec=/usr/bin/ibus-daemon -d</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
archlinux的idea中无法输入中文
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># $HOME指的是家目录
cd $HOME/.config/autostart

# 创建ibus.desktop文件
vim ibus.desktop

# 然后在ibus.desktop中写下以下命令
[Desktop Entry]
Type=Application
Name=ibus
Exec=/usr/bin/ibus-daemon -d -x


# 然后在终端中执行下列命令
/usr/bin/ibus-daemon -d -x -r</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_archlinux常见问题">4.6. archlinux常见问题</h3>
<div class="sect3">
<h4 id="_archlinux没有声音">4.6.1. archlinux没有声音</h4>
<div class="paragraph">
<p>archlinux安装的时候默认使用alsa，可能以下没有安装，执行下列命令，将需要的环境安装好</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">pacman -S alsa-firmware alsa-tools pulseaudio-alsa alsa-utils alsa-plugins alsa-oss</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">手动解除静音</div>
<p>目前版本的 ALSA 安装后，所有声道默认是静音的，必须手动解除</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">amixer sset Master unmute</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">查看声卡</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">aplay -l</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果还是找不到声卡，安装驱动，重启电脑</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo pacman -S sof-firmware</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">重启电脑</div>
<div class="paragraph">
<p>重启电脑，注意，如果是双系统，应该先关闭win10, 再启动电脑，进入archlinux；不能直接从win10重启进入archlinux</p>
</div>
<div class="paragraph">
<p>我们习惯性操作在win10下直接重启然后进入grub选择arch 但是这样会导致Arch没有声音,耳机嗡嗡声 原因是 直接切换声卡会有高低电平的错乱，导致声卡无法正常工作，所以无声音！ 所以正确操作是,在win10下关机,然后在开机选择Arch。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">设置窗口按钮</div>
<p>刚刚安装好 <code>archlinux</code> 系统之后，窗口右上角默认只有一个 <code>关闭按钮</code>，将右上角设置为 <code>最小化</code>，<code>最大化</code>，<code>关闭按钮</code>。</p>
</div>
<div class="paragraph">
<p><strong>方式一</strong>：<code>gsettings</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">gsettings set org.gnome.desktop.wm.preferences button-layout 'appmenu:minimize,maximize,close'</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>方式二</strong>：<code>dconf-editor</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 安装dconf-editor, 如果已安装，就不用安装了
sudo pacman -S dconf-editor

# 执行下列命令
dconf-editor org.gnome.desktop.wm.preferences</code></pre>
</div>
</div>
<div class="paragraph">
<p>执行上述命令，会打开一个设置窗口，找到 <code>button-layout</code> 选项，关闭 <code>使用默认值</code> 按钮，设置 <code>自定义值</code> 为 <code>appmenu:minimize,maximize,close</code>。</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_MongoDB_chapter">5. MongoDB</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_安装_2">5.1. 安装</h3>
<div class="sect3">
<h4 id="_基于_archlinux">5.1.1. 基于 <code>ArchLinux</code></h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>由于 MongoDB 修改了软件授权协议，官方软件仓库已经删除了此软件包，因此只能 <code>AUR</code> 编译安装，或者解压包安装，这里是解压包安装</p>
</li>
<li>
<p>安装版本 4.0.9</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_解压包安装">解压包安装</h5>
<div class="listingblock">
<div class="title">1. 下载压缩包</div>
<div class="content">
<pre>浏览器访问,下载mongodb:  https://www.mongodb.com/dr/fastdl.mongodb.org/linux/mongodb-linux-x86_64-4.0.9.tgz/download</pre>
</div>
</div>
<div class="listingblock">
<div class="title">2. 解压</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 解压
tar xf mongodb-linux-x86_64-4.0.9.tgz</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">3. 创建data目录</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mkdir mongodb-linux-x86_64-4.0.9/data</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">4. 对解压文件夹重命名</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 移动到/usr/local/mongodb
sudo mv mongodb-linux-x86_64-4.0.9/ /usr/local/mongodb</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
若是采用解压包安装mongodb，是没有mongodb.service的。手动添加systemd。
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">5. 运行</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cat &lt;&lt; EOF &gt; /usr/lib/systemd/system/mongodb.service
[Unit]
Description=mongodb
After=network.target remote-fs.target nss-lookup.target

[Service]
Type=simple
User=wjc
Group=wjc
ExecStart=/usr/local/mongodb/bin/mongod --dbpath /usr/local/mongodb/data
PrivateTmp=true

[Install]
WantedBy=multi-user.target
EOF</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
如果想在终端中操作mongodb，还需要配置环境
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">6.在终端中操作mongodb</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 编辑.bashrc
vim ~/.bashrc

#在.bashrc中添加命令
# 将对应的路径改为你mongodb的路径
export PATH=$PATH:/usr/local/mongodb/bin</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mongo</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_yaourt安装">yaourt安装</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">yaourt -Ss mongo</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_基于_centos8">5.1.2. 基于 <code>CentOS8</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">官方安装文档</dt>
<dd>
<p><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-red-hat/">Install MongoDB Community Edition on Red Hat or CentOS</a></p>
</dd>
</dl>
</div>
<div class="sect4">
<h5 id="_安装_3">安装</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cat &gt; /etc/yum.repos.d/mongodb-org-4.2.repo &lt;&lt; EOF
[mongodb-org-4.2]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/\$releasever/mongodb-org/4.2/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-4.2.asc
EOF

dnf install -y mongodb-org</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">mongo的配置文件</dt>
<dd>
<p>/etc/mongod.conf （YML格式）</p>
</dd>
</dl>
</div>
<div class="olist loweralpha">
<div class="title">配置文件说明</div>
<ol class="loweralpha" type="a">
<li>
<p><code>storage.dbPath</code>： 指定数据目录，默认 <code>/var/lib/mongo</code></p>
</li>
<li>
<p><code>systemLog.path</code>： 指定日志目录，默认 <code>/var/log/mongodb</code></p>
</li>
<li>
<p><code>net.port</code>： 指定监听端口，默认 <code>27017</code></p>
</li>
<li>
<p><code>net.bindIp</code>： 指定监听IP，默认 <code>127.0.0.1</code></p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
默认情况下，只有 <code>mongod</code> 用户有数据目录和日志目录的读写权限。
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_配置">配置</h5>
<div class="listingblock">
<div class="title">禁用SELINUX（重启生效）</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">echo SELINUX=disabled&gt;/etc/selinux/config
echo SELINUXTYPE=targeted&gt;&gt;/etc/selinux/config</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">设置 <code>ulimit</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">echo "*               soft   nofile            65535" &gt;&gt; /etc/security/limits.conf
echo "*               hard   nofile            65535" &gt;&gt; /etc/security/limits.conf</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">其它优化</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">echo 'never' &gt; /sys/kernel/mm/transparent_hugepage/enabled</code></pre>
</div>
</div>
<div class="paragraph">
<p>这个设置需要每次开机时设置，需要自行处理。</p>
</div>
<div class="listingblock">
<div class="title">启用权限验证</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">echo 'security:' &gt;&gt; /etc/mongod.conf
echo '  authorization: enabled' &gt;&gt; /etc/mongod.conf</code></pre>
</div>
</div>
<div class="olist arabic">
<div class="title">开机启动</div>
<ol class="arabic">
<li>
<p>开机启动 <code>systemctl enable mongod</code></p>
</li>
<li>
<p>禁用启动 <code>systemctl disable mongod</code></p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">服务管理</div>
<ol class="arabic">
<li>
<p>启动服务 <code>systemctl start mongod</code></p>
</li>
<li>
<p>查看状态 <code>systemctl status mongod</code></p>
</li>
<li>
<p>重启服务 <code>systemctl start mongod</code></p>
</li>
<li>
<p>停止服务 <code>systemctl start mongod</code></p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">验证服务</div>
<ol class="arabic">
<li>
<p>查看端口 <code>ss -antpl|grep 27017</code></p>
</li>
<li>
<p>查看启动日志 <code>grep 'waiting for connections' /var/log/mongodb/mongod.log</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># grep 'waiting for connections' /var/log/mongodb/mongod.log
2019-10-24T20:41:22.920+0800 I  NETWORK  [initandlisten] waiting for connections on port 27017</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_创建用户_2">创建用户</h5>
<div class="paragraph">
<div class="title">创建root帐号</div>
<p>进入控制台：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console"># mongo
MongoDB shell version v4.2.8
connecting to: mongodb://127.0.0.1:27017/?compressors=disabled&amp;gssapiServiceName=mongodb
Implicit session: session { "id" : UUID("62e222b7-8022-443c-b355-53d1a0dcdea0") }
MongoDB server version: 4.2.8
&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>切换到 admin 数据库：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&gt; use admin</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&gt; db.createUser(
  {
    user: "root",
    pwd: "thcl",
    roles: [ "root"]
  }
)</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>切换到 admin 数据库，然后可以用 <code>db.dropUser("root")</code> 命令删除用户。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">创建普通用户</div>
<p>用刚才设置的root密码登录：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console"># mongo -uroot -pthcl
MongoDB shell version v4.2.8
connecting to: mongodb://127.0.0.1:27017/?compressors=disabled&amp;gssapiServiceName=mongodb
Implicit session: session { "id" : UUID("a7541379-f92f-4d68-9060-36d2f9e7839b") }
MongoDB server version: 4.2.8
---
Enable MongoDB's free cloud-based monitoring service, which will then receive and display
metrics about your deployment (disk utilization, CPU, operation statistics, etc).

The monitoring data will be available on a MongoDB website with a unique URL accessible to you
and anyone you share the URL with. MongoDB may use this information to make product
improvements and to suggest MongoDB products and deployment options to you.

To enable free monitoring, run the following command: db.enableFreeMonitoring()
To permanently disable this reminder, run the following command: db.disableFreeMonitoring()
---

&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>切换到 thcl 数据库，如果不存在则自动创建：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&gt; use thcl</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&gt; db.createUser(
  {
    user: "thcl",
    pwd: "thcl",
    roles: [ { role: "readWrite", db: "thcl" } ]
  }
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>测试新用户登录：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console"># mongo -uthcl -pthcl thcl
MongoDB shell version v4.2.8
connecting to: mongodb://127.0.0.1:27017/thcl?compressors=disabled&amp;gssapiServiceName=mongodb
Implicit session: session { "id" : UUID("509c1c6f-55c6-406e-ab13-3e8deb76bd66") }
MongoDB server version: 4.2.8
&gt; db
thcl
&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mongodb使用">5.2. mongodb使用</h3>
<div class="sect3">
<h4 id="_创建删除数据库">5.2.1. 创建，删除数据库</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">use database_name

show dbs
db.dropDatabase()
db.createCollection(name,options[capped=bool, autoIndexld=bool, size=integer, max=integer])
# capped固定集合大小，若超出，则覆盖，为true时需指定size大小；autoIndexld为true时，在_id字段创建索引，默认false；
# db.collection_name.insert({"name":"hafs"})
# db.collection_name.drop()  删除集合</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_创建删除集合">5.2.2. 创建，删除集合</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">db.createCollection("collection_name")

db.collection_name.drop()</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_插入文档">5.2.3. 插入文档</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">db.col.insert({name1: 'value1', name2: 'value2'})</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_查询文档">5.2.4. 查询文档</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">db.collection_name.find().pretty()  # pretty() 美观打印

db.collection_name.find().limit(number)
db.collection_name.find().limit(NUMBER).skip(number)  # 跳过一定数量进行查询
db.collection_name.find().sort({KEY:1})  # 排序 1为升序，-1降序

# 查询 title 包含"教"字的文档：
db.col.find({title:/教/})

# 查询 title 字段以"教"字开头的文档：
db.col.find({title:/^教/})

# 查询 title字段以"教"字结尾的文档：
db.col.find({title:/教$/})</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_更新文档">5.2.5. 更新文档</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">db.collection_name.update()

db.col.update({'title':'MongoDB 教程'},{$set:{'title':'MongoDB'}})</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_删除文档">5.2.6. 删除文档</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">db.collection_name.remove("条件")</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_索引">5.2.7. 索引</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 创建索引
db.collection.createIndex(keys, options)

# db.values.createIndex({open: 1, close: 1}, {background: true}) background建索引过程会阻塞其它数据库操作，background可指定以后台方式创建索引，即增加 "background" 可选"background" 默认值为false

# 查看集合索引
db.col.getIndexes()

# 查看集合索引大小
db.col.totalIndexSize()

# 删除集合所有索引
db.col.dropIndexes()

# 删除集合指定索引
db.col.dropIndex("索引名称")</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_聚合">5.2.8. 聚合</h4>
<div class="paragraph">
<p>db.COLLECTION_NAME.aggregate(AGGREGATE_OPERATION) # 聚合</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Redis_chapter">6. Redis</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_redis安装">6.1. redis安装</h3>
<div class="sect3">
<h4 id="_基于_arch_包管理安装">6.1.1. 基于 <code>arch</code> 包管理安装</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 搜索
pacman -Ss redis
# 安装
sudo pacman -S redis
# 运行
sudo systemctl start redis
# 查看是否启动
redis-cli
# 启动成功，显示如下
# 127.0.0.1:6379</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_基于centos8解压安装">6.1.2. 基于centos8解压安装</h4>
<div class="paragraph">
<div class="title">安装需要的环境</div>
<p>如果linux已经存在如下环境，忽略这一步骤</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">yum -y install gcc automake autoconf libtool make
yum install gcc gcc-c++</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">下载，解压，并重命名</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd /usr/local/
wget https://download.redis.io/releases/redis-6.0.10.tar.gz
tar xzf redis-6.0.10.tar.gz
mv redis-6.0.10/ redis</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">编译安装</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd /usr/local/redis
make</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">修改配置项</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">vim redis.conf
# 修改redis.conf中的这几个配置
# 修改成后台启动
daemonize no 改为yes
# 设置密码，默认是注释的无密码
requirepass 666666
# 开启aof持久化方式
appendonly yes
# 允许所有ip访问
bind 0.0.0.0</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">添加systemd</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/systemd/system/redis.service
[Unit]
Description=redis-server
After=network.target

[Service]
Type=forking
ExecStart=/usr/local/redis/src/redis-server   /usr/local/redis/redis.conf
PrivateTmp=true

[Install]
WantedBy=multi-user.target

EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">设置开机启动</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">systemctl enable redis
systemctl start redis</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_6种数据类型">6.2. 6种数据类型</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">数据类型</th>
<th class="tableblock halign-left valign-top">数据类型存储的值</th>
<th class="tableblock halign-left valign-top">说 明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">STRING（字符串）</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">可以是保存字符串、整数和浮点数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">可以对字符串进行操作，比如增加字符或者求子串：如果是整数或者浮点数，可以实现计算，比如自增等</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LIST（列表）</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">它是一个链表，它的每一个节点都包含一个字符串</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis 支持从链表的两端插入或者弹出节点，或者通过偏移对它进行裁剪；还可以读取一个或者多个节点，根据条件删除或者查找节点等</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SET（集合）</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">它是一个收集器，但是是无序的，在它里而每一个元素都是一个字符串，而且是独一无二，各不相同的</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">可以新增、读取、删除单个元素：检测一个元素是否在集合中；计算它和其他集合的交集、并集和差集等；随机从集合中读取元素</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HASH（哈希散列表）</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">它类似于 Java 语言中的 Map，是一个键值对应的无序列表</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">可以増、删、査、改单个键值对，也可以获取所有的键值对</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZSET（有序集合）</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">它是一个有序的集合，可以包含字符 串、整数、浮点数、分值（score），元素 的排序是依据分值的大小来决定的</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">可以增、删、査、改元素，根据分值的范围或者成员 來获取对应的元索</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HyperLogLog（基数）</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">它的作用是计算重复的值，以确定存储的数量</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">只提供基数的运算，不提供返回的功能</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_哨兵模式">6.3. 哨兵模式</h3>
<div class="sidebarblock">
<div class="content">
<div class="title">哨兵模式</div>
<div class="ulist">
<ul>
<li>
<p>通过发送命令，让 Redis 服务器返回监测其运行状态，包括主服务器和从服务器。</p>
</li>
<li>
<p>当哨兵监测到 master 宕机，会自动将 slave 切换成 master，然后通过发布订阅模式通知到其他的从服务器，修改配置文件，让它们切换主机。</p>
</li>
<li>
<p>多个哨兵模式: 多个哨兵不仅监控各个 Redis 服务器，而且哨兵之间互相监控，看看哨兵们是否还“活”着。</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_悲观锁和乐观锁">6.4. 悲观锁和乐观锁</h3>
<div class="sidebarblock">
<div class="content">
<div class="title">悲观锁</div>
<div class="paragraph">
<p>悲观锁是一种利用数据库内部机制提供的锁的方法，也就是对更新的数据加锁，这样在并发期间一旦有一个事务持有了数据库记录的锁，其他的线程将不能再对数据进行更新了，这就是悲观锁的实现方式。</p>
</div>
<div class="paragraph">
<p>对于悲观锁来说，当一条线程抢占了资源后，其他的线程将得不到资源，那么这个时候，CPU 就会将这些得不到资源的线程挂起，挂起的线程也会消耗 CPU 的资源，尤其是在高并发的请求中。</p>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">悲观锁</div>
<div class="paragraph">
<p>乐观锁是一种不会阻塞其他线程并发的机制，它不会使用数据库的锁进行实现，它的设计里面由于不阻塞其他线程，所以并不会引发线程频繁挂起和恢复，这样便能够提高并发能力，所以也有人把它称为非阻塞锁。</p>
</div>
<div class="paragraph">
<p>对于多个线程共同的资源，先保存一个旧值（Old Value），比如进入线程后，记录旧值，然后经过一定的逻辑处理。当需要保存数据时，先比较数据库当前的值和旧值是否一致，如果一致则进行数据库操作，否则就认为它已经被其他线程修改过了，不再进行操作。</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ElasticSearch_chapter">7. ElasticSearch</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_关于es">7.1. 关于ES</h3>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<div class="title">1、什么是ES</div>
<p>Elasticsearch 是一个分布式的 RESTful 风格的搜索和数据分析引擎</p>
</div>
<div class="paragraph">
<div class="title">2、什么是倒排索引</div>
<p>传统的我们的检索是通过文章，逐个遍历找到对应关键词的位置。<br>
而倒排索引，是通过分词策略，形成了词和文章的映射关系表，这种词典+映射表即为倒排索引。</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_elasticsearch安装">7.2. elasticsearch安装</h3>
<div class="paragraph">
<p>elasticsearch 官方文档 <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/getting-started.html" class="bare">https://www.elastic.co/guide/en/elasticsearch/reference/current/getting-started.html</a></p>
</div>
<div class="sect3">
<h4 id="_包管理安装">7.2.1. 包管理安装</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
基于ArchLinux
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">安装</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">pacman -Ss elasticsearch

sudo pacman -S elasticsearch</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">运行</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo systemctl start elasticsearch

curl http://127.0.0.1:9200</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_解压安装">7.2.2. 解压安装</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
基于linux系统解压安装es,这里安装版本的是7.5
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">安装</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 下载压缩包
curl -L -O https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.5.2-linux-x86_64.tar.gz
或者
wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.5.2-linux-x86_64.tar.gz

# 解压
tar -xvf elasticsearch-7.5.2-linux-x86_64.tar.gz /usr/local/ES</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">运行</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># $Elasticsearch 指的是es的安装目录
$Elasticsearch/bin/elasticsearch

curl http://127.0.0.1:9200</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_java_elasticsearch">7.3. java + elasticsearch</h3>
<div class="sect3">
<h4 id="_java_high_level_rest_client">7.3.1. Java High Level REST Client</h4>
<div class="paragraph">
<p>官方文档 <a href="https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-supported-apis.html" class="bare">https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-supported-apis.html</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
以下是在 <code>springboot</code> 中导入 <code>Java High Level REST Client</code> 的pom.xml配置，版本为7.5，其他版本不一定
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"># 加入 dependencyManagement 是因为兼容性问题
&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;
            &lt;artifactId&gt;elasticsearch-rest-high-level-client&lt;/artifactId&gt;
            &lt;version&gt;7.5.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.elasticsearch&lt;/groupId&gt;
            &lt;artifactId&gt;elasticsearch&lt;/artifactId&gt;
            &lt;version&gt;7.5.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;
            &lt;artifactId&gt;elasticsearch-rest-client&lt;/artifactId&gt;
            &lt;version&gt;7.5.0&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;

&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;
        &lt;artifactId&gt;elasticsearch-rest-high-level-client&lt;/artifactId&gt;
        &lt;version&gt;7.5.0&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_java_low_level_rest_client">7.3.2. Java Low Level REST Client</h4>
<div class="paragraph">
<p>官方文档 <a href="https://www.elastic.co/guide/en/elasticsearch/client/java-api/current/_javadoc.html" class="bare">https://www.elastic.co/guide/en/elasticsearch/client/java-api/current/_javadoc.html</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_WireShark_chapter">8. WireShark</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_wireshark安装">8.1. wireshark安装</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 查找
pacman -Ss wireshark
# 安装
sudo pacman -S wireshark-cli
sudo pacman -S wireshark-qt</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Kafka_chapter">9. Kafka</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_kafka安装配置">9.1. kafka安装配置</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
$HOME 指的是家目录<br>
$Kafka 指的是kafka安装目录
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_linux">9.1.1. linux</h4>
<div class="listingblock">
<div class="title">安装</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd $HOME/Downloads
# 下载
wget -c http://mirrors.tuna.tsinghua.edu.cn/apache/kafka/2.3.1/kafka_2.13-2.4.1.tgz
# 解压
tar xf kafka_2.13-2.4.1.tgz</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">启动</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 启动内置zookeeper
$Kafka/bin/zookeeper-server-start.sh config/zookeeper.properties

# 启动 kafka
$Kafka/bin/kafka-server-start.sh config/server.properties</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">创建topic</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 创建一个名为test的topic
$Kafka/bin/kafka-topics.sh --create --bootstrap-server 127.0.0.1:9092 --replication-factor 1 --partitions 1 --topic test</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">查看topic列表</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$Kafka/bin/kafka-topics.sh --list --bootstrap-server 127.0.0.1:9092</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">启动生产者发送消息</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 向一个名为test的topic发送消息
$Kafka/bin/kafka-console-producer.sh --broker-list 127.0.0.1:9092 --topic test
This is a message
This is another message</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">启动消费者接受消息</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 从一个名为test的topic拿消息
$Kafka/bin/kafka-console-consumer.sh --bootstrap-server 127.0.0.1:9092 --topic test --from-beginning
This is a message
This is another message</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_systemd启动">systemd启动</h5>
<div class="listingblock">
<div class="title">kafka.service</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/systemd/system/kafka.service
[Unit]
Description=Apache Kafka
After=network.target remote-fs.target nss-lookup.target kafka-zookeeper.service

[Service]
Type=simple
User=kafka
Group=kafka
ExecStart=/usr/local/kafka/bin/kafka-server-start.sh /usr/local/kafka/config/server.properties
ExecStop=/usr/local/kafka/bin/kafka-server-stop.sh

[Install]
WantedBy=multi-user.target
EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">kafka-zookeeper.service</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/systemd/system/kafka-zookeeper.service
[Unit]
Description=Apache Zookeeper (Kafka)
After=network.target remote-fs.target nss-lookup.target

[Service]
Type=simple
User=kafka
Group=kafka
ExecStart=/usr/local/kafka/bin/zookeeper-server-start.sh /usr/local/kafka/config/zookeeper.properties
ExecStop=/usr/local/kafka/bin/zookeeper-server-stop.sh

[Install]
WantedBy=multi-user.target
EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">启动</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">systemctl start kafka-zookeeper.service

systemctl start kafka.service</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_windows">9.1.2. windows</h4>
<div class="paragraph">
<p>安装步骤同linux一样</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$Kafka\bin\windows\zookeeper-server-start.bat config\zookeeper.properties

$Kafka\bin\windows\kafka-server-start.bat config\server.properties

$Kafka\bin\windows\kafka-topics.bat --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic test

$Kafka\bin\windows\kafka-topics.bat --list --bootstrap-server localhost:9092

$Kafka\bin\windows\kafka-console-producer.bat --broker-list localhost:9092 --topic test

$Kafka\bin\windows\kafka-console-consumer.bat --bootstrap-server 127.0.0.1:9092 --topic test --from-beginning</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kafka对外开放">9.1.3. kafka对外开放</h4>
<div class="paragraph">
<p>开启对外端口监听，编辑文件 config/server.properties 修改以下参数：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">vim $Kafka/config/server.properties
# 修改配置如下
advertised.listeners=PLAINTEXT://0.0.0.0:9092</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_RabbitMQ_chapter">10. RabbitMQ</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_rabbitmq安装">10.1. RabbitMq安装</h3>
<div class="sect3">
<h4 id="_安装_4">10.1.1. 安装</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 查找
pacman -Ss rabbitmq
# 安装
sudo pacman -S rabbitmq
# 启动
systemctl start rabbitmq</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rabbitmqctl">10.2. rabbitmqctl</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_zookeeper_chapter">11. zookeeper</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_zookeeper_安装">11.1. zookeeper 安装</h3>
<div class="paragraph">
<p>zookeeper 下载地址 <a href="http://mirrors.hust.edu.cn/apache/zookeeper" class="bare">http://mirrors.hust.edu.cn/apache/zookeeper</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
$Zookeeper 指的是zokeeper安装目录
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_安装_5">11.1.1. 安装</h4>
<div class="paragraph">
<p>1.到zookeeper下载地址下载<br>
2.将压缩包解压<br>
3.<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd $Zookeeper/conf

# 重命名zoo_sample.cfg为zoo.cfg
mv zoo_sample.cfg zoo.cfg

vim zoo.cfg

# 添加以下两行
dataDir=$Zookeeper/data
dataLogDir=$Zookeeper/log

# 在zookeeper目录下创建data和log文件夹
mkdir $Zookeeper/data
mkdir $Zookeeper/log</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_运行">11.1.2. 运行</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Usage: ./zkServer.sh [--config &lt;conf-dir&gt;] {start|start-foreground|stop|restart|status|print-cmd}
$Zookeeper/bin/zkServer.sh start</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_MySQL_chapter">12. MySQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MySQL 所有参考手册文档: <a href="https://dev.mysql.com/doc/refman/" class="bare">https://dev.mysql.com/doc/refman/</a><br>
MySQL 8.0 参考手册: <a href="https://dev.mysql.com/doc/refman/8.0/en/" class="bare">https://dev.mysql.com/doc/refman/8.0/en/</a><br>
MySQL 5.7 参考手册: <a href="https://dev.mysql.com/doc/refman/5.7/en/" class="bare">https://dev.mysql.com/doc/refman/5.7/en/</a></p>
</div>
<div class="paragraph">
<p>推荐阅读的MySQL文档: <a href="http://c.biancheng.net/view/2551.html" class="bare">http://c.biancheng.net/view/2551.html</a></p>
</div>
<div class="sect2">
<h3 id="_安装_6">12.1. 安装</h3>
<div class="sect3">
<h4 id="_archlinux">12.1.1. ArchLinux</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">pacman -Ss mysql

sudo pacman -S mysql</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_免安装版配置">12.1.2. 免安装版配置</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
在windows下
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>安装文档: <a href="http://c.biancheng.net/view/2412.html" class="bare">http://c.biancheng.net/view/2412.html</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_常用配置">12.2. 常用配置</h3>
<div class="sect3">
<h4 id="_常用用户配置">12.2.1. 常用用户配置</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
MySQL 5.7 以上
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">创建，修改，删除用户</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 创建
CREATE USER 'username'@'localhost' IDENTIFIED BY 'password';

# 修改用户密码
ALTER USER 'username'@'localhost'IDENTIFIED BY 'new_password';

# 删除
DROP USER 'username'@'localhost';</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">允许远程连接</div>
<p>% 表示允许所有的主机连接，也可以设置域名或者ip</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">use mysql;

update user set host="%" where user="username";

# 最后需要刷新一下数据库才会生效
flush privileges;</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">设置用户权限</div>
<p>mysql 权限设置参考: <a href="http://c.biancheng.net/view/2615.html" class="bare">http://c.biancheng.net/view/2615.html</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 对用户user_name开放所有权限，'localhost' 必须与 mysql.user 表中的 Host 字段一致
GRANT ALL PRIVILEGES ON *.* TO 'username'@'localhost';</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">本机无密码登录</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mysql_config_editor set --login-path=local --host=localhost --user=root --password</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mysql --login-path=local db_name</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mysql备份和还原">12.3. MySQL备份和还原</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
--add-drop-table 参数表示在导出的sql文件的最前面加上 <code>DROP TABLE IF EXISTS `table_name</code>;`
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mysqldump -u'username' -p'password' --add-drop-table db_name table_name &gt; db_name_dump.sql

mysql -u'username' -p'password' db_name table_name &lt; db_name_dump.sql</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_索引_2">12.4. 索引</h3>
<div class="listingblock">
<div class="title">创建索引</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">CREATE INDEX index_name USING BTREE ON database_name.table_name (createBy);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">查看索引</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">SHOW INDEX FROM table_name;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">删除索引</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">DROP INDEX index_name ON table_name;

或

ALTER TABLE table_name DROP INDEX index_name;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mysqldump">12.5. mysqldump</h3>
<div class="paragraph">
<p>参考地址: <a href="https://www.cnblogs.com/chenmh/p/5300370.html" class="bare">https://www.cnblogs.com/chenmh/p/5300370.html</a></p>
</div>
<div class="listingblock">
<div class="title">导出系统数据库在内的所有数据库</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mysqldump -u'username' -p'password' --all-databases &gt; all.sql</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">导出多个数据库</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mysqldump -u'username' -p'password' --databases db1 db2 &gt; user.sql</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">导出数据库的多张表</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mysqldump -u'username' -p'password' --databases db1 --tables a1 a2 &gt; db1.sql</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">导出id=1的数据</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mysqldump -u'username' -p'password' --databases db1 --tables a1 --where='id=1' &gt; a1.sql</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">导出字段是字符串,并且导出的sql中不包含drop table,create table</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 关键参数 --no-create-info
mysqldump -u'username' -p'password' --no-create-info --databases db1 --tables a1 --where="id='a'" &gt; a1.sql</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">希望导出数据之后生成一个新的binlog文件,只需要加上-F参数即可</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mysqldump -u'username' -p'password' --databases db1 -F &gt; db1.sql</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">只导出表结构不导出数据，--no-data</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mysqldump -u'username' -p'password' --no-data --databases db1 &gt; db1.sql</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">跨服务器导出导入数据</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 将h1服务器中的db1数据库的所有数据导入到h2中的db2数据库中，db2的数据库必须存在否则会报错
mysqldump --host=h1 -u'username' -p'password' --databases db1 |mysql --host=h2 -u'username' -p'password' db2

# 加上-C参数可以启用压缩传递
mysqldump --host=192.168.80.137 -u'username' -p'password' -C --databases test |mysql --host=192.168.80.133 -u'username' -p'password' test</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">mysqldump常用参数</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">--no-create-db，  ---取消创建数据库sql(默认存在)
--no-create-info，---取消创建表sql(默认存在)
--no-data         ---不导出数据(默认导出)
--add-drop-database ---增加删除数据库sql（默认不存在）
--skip-add-drop-table  ---取消每个数据表创建之前添加drop数据表语句(默认每个表之前存在drop语句)
--skip-add-locks       ---取消在每个表导出之前增加LOCK TABLES（默认存在锁）
--skip-comments        ---注释信息(默认存在)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_SpringCloud_chapter">13. SpringCloud</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_相关文档">13.1. 相关文档</h3>
<div class="paragraph">
<p>Spring Cloud Dalston中文文档<br>
<a href="https://www.springcloud.cc/spring-cloud-dalston.html#_features" class="bare">https://www.springcloud.cc/spring-cloud-dalston.html#_features</a></p>
</div>
<div class="paragraph">
<p>推荐的个人文档<br>
<a href="http://blog.didispace.com/spring-cloud-learning/" class="bare">http://blog.didispace.com/spring-cloud-learning/</a><br>
<a href="http://www.ityouknow.com/spring-cloud.html" class="bare">http://www.ityouknow.com/spring-cloud.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_什么是spring_cloud">13.2. 什么是spring cloud</h3>

</div>
<div class="sect2">
<h3 id="_springboot和springcloud的对应关系">13.3. springboot和springcloud的对应关系</h3>
<div class="paragraph">
<p>大版本：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Spring Cloud</th>
<th class="tableblock halign-left valign-top">Spring Boot</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Angel版本</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">兼容Spring Boot 1.2.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brixton版本</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">兼容Spring Boot 1.3.x，也兼容Spring Boot 1.4.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Camden版本</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">兼容Spring Boot 1.4.x，也兼容Spring Boot 1.5.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dalston版本、Edgware版本</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">兼容Spring Boot 1.5.x，不兼容Spring Boot 2.0.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finchley版本</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">兼容Spring Boot 2.0.x，不兼容Spring Boot 1.5.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Greenwich版本</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">兼容Spring Boot 2.1.x</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>在实际开发过程中，我们需要更详细的版本对应：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Spring Boot</th>
<th class="tableblock halign-left valign-top">Spring Cloud</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.2.RELEASE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dalston.RC1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5.9.RELEASE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Edgware.RELEASE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0.2.RELEASE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finchley.BUILD-SNAPSHOT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0.3.RELEASE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finchley.RELEASE</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_AsciiDoc_chapter">14. AsciiDoc</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_语法快速参考">14.1. 语法快速参考</h3>
<div class="paragraph">
<p>文档地址: <a href="https://asciidoctor.cn/docs/asciidoc-syntax-quick-reference/index.html" class="bare">https://asciidoctor.cn/docs/asciidoc-syntax-quick-reference/index.html</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Git_chapter">15. Git</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_git配置">15.1. git配置</h3>
<div class="listingblock">
<div class="title">设置全局配置</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git config --global user.name "wjcml"
git config --global user.email "wjcml@foxmail.com"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">设置本地配置</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git config --local user.name "wjcml"
git config --local user.email "wjcml@foxmail.com"</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">显示中文配置</div>
<p>解决 <code>git status</code> 命令不显示中文的问题</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git config --global core.quotepath false</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_设计模式_chapter">16. 设计模式</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_systemd_chapter">17. systemd</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_Linux_chapter">18. Linux</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_基本命令操作">18.1. 基本命令操作</h3>
<div class="listingblock">
<div class="title">scp</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">scp local_file remote_username@remote_ip:remote_folder</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">ssh</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ssh remote_username@remote_ip</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wsl">18.2. WSL</h3>
<div class="paragraph">
<p><a href="https://mp.weixin.qq.com/s?__biz=MzIyMzk1MTM5MA==&amp;mid=2247483704&amp;idx=1&amp;sn=9fc0b7e8421200f4d8c767d11fe8c434&amp;chksm=e8172e49df60a75ffdb231b4bfc037fa3eac611c258fa48d2286a33a220732267faa8dec8048&amp;mpshare=1&amp;scene=23&amp;srcid=&amp;sharer_sharetime=1587190600047&amp;sharer_shareid=8aa1c4af8f47aa8c869e10ed05f59781#rd">Windows10内置Ubuntu(WSL)初体验</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_linux无密码登录">18.3. Linux无密码登录</h3>
<div class="paragraph">
<p><a href="https://mp.weixin.qq.com/s?__biz=MzIyMzk1MTM5MA==&amp;mid=2247483748&amp;idx=1&amp;sn=7b322280b81dc6ca7857d3ea94c22d8e&amp;chksm=e8172e15df60a703353d09a71445e8b356fdf0b076f2904bb2b00da844db3f32c74eb8005753&amp;mpshare=1&amp;scene=23&amp;srcid=&amp;sharer_sharetime=1587190651429&amp;sharer_shareid=8aa1c4af8f47aa8c869e10ed05f59781#rd">Linux无密码登陆链接</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_配置客户端私钥">18.4. 配置客户端私钥</h3>
<div class="listingblock">
<div class="title">生成私钥对</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 该命令会在 ~/ssh 下生成 wjc（私钥文件） 和 wjc.pub（公钥文件）
ssh-keygen -N "" -f ~/.ssh/wjc</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
如果你已经拥有自己的私钥对，就将自己的私钥拷贝到 <code>~/ssh</code>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">创建配置文件</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">touch ~/.ssh/config</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">允许修改SSH客户端配置文件</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">chmod 755 ~/.ssh/config</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">写入配置</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cat &lt;&lt; EOF &gt; ~/.ssh/config
Host 118.24.186.166
    IdentityFile ~/.ssh/wjc
EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">关闭文件写入权限</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">chmod 400 ~/.ssh/config</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">连接ssh</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ssh root@118.24.186.166</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Python_chapter">19. Python</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_安装_7">19.1. 安装</h3>
<div class="sect3">
<h4 id="_python3_8">19.1.1. python3.8</h4>

</div>
</div>
<div class="sect2">
<h3 id="_日志输出">19.2. 日志输出</h3>
<div class="listingblock">
<div class="title">happy-python</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">pip install happy-python</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">日志输出模板(log.ini.sample)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">[loggers]
keys = root

[formatters]
keys = defaultFormatter

[formatter_defaultFormatter]
format = %(asctime)s %(process)s [%(levelname)s] %(message)s
datefmt = %Y-%m-%d %H:%M:%S
class = logging.Formatter

[handlers]
keys = defaultHandler, fileHandler

[handler_defaultHandler]
class = StreamHandler
level = DEBUG
formatter = defaultFormatter
args = (sys.stdout,)

[handler_fileHandler]
class = logging.handlers.RotatingFileHandler
level = DEBUG
formatter = defaultFormatter
args = ('error.log', 'a', 100000000, 3, 'utf-8', False)

[logger_root]
level = DEBUG
handlers = defaultHandler, fileHandler
qualname = root</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Proxy_chapter">20. Proxy</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_全局代理">20.1. 全局代理</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 添加代理的环境变量
export all_proxy=socks5://192.168.2.5:1080

# 查看
export

# 删除代理环境变量
unset all_proxy</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_proxychains">20.2. proxychains</h3>
<div class="sect3">
<h4 id="_安装_8">20.2.1. 安装</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">pacman -Ss proxychains

pacman -S proxychains-ng</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_配置单个代理">20.2.2. 配置单个代理</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 编辑proxychains.conf
vim /etc/proxychains.conf

# 在proxychains.conf的 `[ProxyList]` 下添加
socks5 |127.0.0.1 1080</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">1. 通过proxychains.conf指定的代理（或链接的代理）运行telnet</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">proxychains telnet targethost.com</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">2. 使用不同的配置文件，然后使用proxychains.conf 连接到targethost2.com主机</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">proxychains -f /etc/proxychains-other.conf targethost2.com</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_配置多个代理">20.2.3. 配置多个代理</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 编辑proxychains.conf
vim /etc/proxychains.conf

# 在proxychains.conf的 `[ProxyList]` 下添加
http    183.111.169.207 3128
socks4  104.128.120.187 1080
https   75.66.83.12     80
http    91.221.61.126   3128</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>动态链 dynamic_chain</code> 和 <code>随机链 random_chain</code> 冲突，不能同时使用
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">动态链(dynamic_chain)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 动态链接将使我们能够通过列表中的每个代理运行流量，并且如果其中一个代理已关闭或没有响应，则将跳过失效的代理，它将自动转到列表中的下一个代理，而不会引发错误。每个连接都将通过链接代理完成。所有代理将按照它们在列表中出现的顺序进行链接。激活动态链接可实现更大的匿名性和无故障的黑客体验。要启用动态链，请在配置文件 proxychains.conf 中取消注释

dynamic_chain</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">随机链(random_chain)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># 随机链接将使代理链可以从我们的列表中随机选择IP地址，并且每次使用代理链时，代理链看起来与目标都不同，这使得从源头跟踪流量变得更加困难。要启用随机链，请在配置文件 proxychains.conf 中取消注释

random_chain</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">chain_len</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># chain_len确定在创建 `随机代理链` 时将使用链中多少个IP地址, 要启用chain_len，请在配置文件 proxychains.conf 中取消注释

chain_len</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Spider_chapter">21. 爬虫及反爬策略</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_反爬虫策略及解决办法">21.1. 反爬虫策略及解决办法</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">反爬虫策略</th>
<th class="tableblock halign-left valign-top">解决办法（爬虫）</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">通过headers进行爬虫检测，例如host，referer，user-agent等字段检测</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">对于基本网页的抓取可以自定义headers，添加headers的数据</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">基于用户行为的发爬虫：(同一IP短时间内访问的频率)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用多个代理ip进行抓取或者设置抓取的频率降低一些</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">动态网页反爬虫(通过ajax请求数据，或者通过JavaScript生成)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">动态网页的可以模拟ajax请求，将得到的数据进行分析，取出需要的数据；还可以使用selenium + phantomjs，puppeteer + node.js 进行抓取</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">对部分数据进行加密处理的(数据是乱码)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">对部分数据进行加密的，可以使用selenium进行截图，使用python自带的pytesseract库进行识别，但是比较慢最直接的方法是找到加密的方法进行逆向推理</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">一次动作，多次请求，并且这些请求会做一些验证操作，例如请求后台会发送后边请求网页需要的cookie，还可以js生成cookie发送给后台进行校验</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">模拟每次重要的请求，将需要的验证参数获取设置到cookie中，解析js生成cookie的规则，然后生成cookie设置到cookie中</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">对js文件进行加密处理，使js文件难以读懂，在js中设置debug，禁止用户在网页中调试</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">加密的js文件就只有慢慢解析生成验证参数的算法了</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">针对puppeteer，以及selenium的自动化爬取，校验是否是用webdriver启动</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将设置浏览器启动是否为webdriver参数值进行修改</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">每次访问网站，都会进行一次302跳转，服务器发送一个种子（seed），然后跳转界面的js会将这个种子通过一系列算法，生成一个必要的验证参数返回给服务器，并且对这段js进行混淆，避免他人轻易看懂算法</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">方法一（简单粗暴，服务器无法识别是否为webdriver）：使用自动化测试工具（node.js+puppeteer，selelium+webdriver），并且将无头模式的标志设置为false或者删除; 方法二（麻烦，解析需要大量时间）：解析生成验证参数的算法</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">判断是否使用类似puppeteer的后台浏览器</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用正常的浏览器完全模拟正常用户，例如使用使用puppeteer直接启动Chrome浏览器</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_针对反自动化爬虫策略以及解决办法">21.2. 针对反自动化爬虫策略以及解决办法</h3>
<div class="paragraph">
<div class="title">1、User-Agent</div>
<p>User-Agent一般用来检测操作系统和用户浏览器，Chrome在Windows下的User-Agent值类似于"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36"，</p>
</div>
<div class="paragraph">
<p>在Linux平台下版本59的Chrome的User-Agent值为"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/59.0.3071.115 Safari/537.36"</p>
</div>
<div class="paragraph">
<p>通过检测"HeadlessChrome"判断是否为无头浏览器</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">if (/HeadlessChrome/.test(window.navigator.userAgent)) {
    console.log("Chrome headless detected");
}</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">2、Plugins</div>
<p>在Chrome中有默认的plugins，navigator.plugins会返回一个plugins的列表，在无头模式（headless mode）中，这个plugins是空的</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">if(navigator.plugins.length == 0) {
    console.log("It may be Chrome headless");
}</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">3、Languages</div>
<p>在Chrome中，js有两种获取使用语言的参数，navigator.language和navigator.languages，第一个是获取浏览器UI的语言，第二种语言会得到一个字符串列表，然而在无头模式中，navigator.languages返回的是一个空字符串</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">if(navigator.languages == "") {
    console.log("Chrome headless detected");
}</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">4、WebGL</div>
<p>WebGL是执行HTML canvas 3D渲染的API，这个API将会查询图形驱动的vendor和renderer，在Linux平台下的Chrome，图形驱动的vent偶然和renderer为"Google inc."和"Google swiftShader"。</p>
</div>
<div class="paragraph">
<p>在无头模式中renderer为"Mesa OffScreen",vendor为"Brian Paul"，但并不是所有的无头Chrome的renderer和vendor的值是一样的， "Mesa Offscreen" 和 "Brian Paul"表示无头模式存在。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">var canvas = document.createElement('canvas');
var gl = canvas.getContext('webgl');

var debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
var vendor = gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL);
var renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);

if(vendor == "Brian Paul" &amp;&amp; renderer == "Mesa OffScreen") {
    console.log("Chrome headless detected");
}</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">5、Browser features</div>
<p>在无头模式中，Modernizr 库中没有"hairline"</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">if(!Modernizr["hairline"]) {
    console.log("It may be Chrome headless");
}</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">6、Missing image</div>
<p>在Chrome中图片的长和高依赖于浏览器的显示，不为0，但是在无头模式中，长和高为0，图片的尺寸不会被加载。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">var body = document.getElementsByTagName("body")[0];
var image = document.createElement("img");
image.src = "http://iloveponeydotcom32188.jg";
image.setAttribute("id", "fakeimage");
body.appendChild(image);
image.onerror = function(){
    if(image.width == 0 &amp;&amp; image.height == 0) {
        console.log("Chrome headless detected");
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_高并发_chapter">22. 高并发</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_高并发解决方案">22.1. 高并发解决方案</h3>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>1、增加服务器，均衡负载<br>
2、数据库优化（读写分离，分库分表，水平拆分，垂直拆分）<br>
3、限流：滑动窗口算法，漏桶算法，令牌桶算法<br>
4、cdn加速<br>
5、独立的静态资源服务器</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-09-24 15:17:27 +0800
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>